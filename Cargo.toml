[package]
name = "mech-math"
version = "0.2.59"
authors = ["Corey Montella <corey@mech-lang.org>", "Steven McPhillimey <slm526@lehigh.edu>", "Liam Messinger <ljm426@lehigh.edu>", "Natalie Dumler <nad326@lehigh.edu>"]
description = "Math library for the Mech language"
documentation = "http://docs.mech-lang.org"
homepage = "https://mech-lang.org"
repository = "https://github.com/mech-machines/math"
keywords = ["mech", "language", "programming"]
license = "Apache-2.0"
readme = "README.md"
edition = "2021"

[badges]
gitlab = { repository = "mech-lang/machines/math", branch = "main" }
maintenance = { status = "actively-developed" }

[lib]
crate-type = ["rlib"]

[features]
no_std = ["mech-core/no_std"]

default = ["stdlib", "pretty_print", "serde", "compiler", "program",
            "ops_default", "ops_assign_default", "trig_default", "funcs_default",
            "statements_default", "subscript_default",
            "mech-core/default", "exp_default",
          ]

ops_default = ["add", "sub", "mul", "div", "exp", "mod"]
ops_assign_default = ["add_assign", "sub_assign", "mul_assign", "div_assign"]
trig_default = ["acos", "acosh", "acot", "acsc", "asec", "asin", "asinh", "atan", "atan2", "atanh", "cos", "cosh", "cot", "csc", "hypot", "sec", "sin", "sinh", "tan", "tanh"]
funcs_default = [
  "cbrt",
  "ceil",
  "copysign",
  "erf",
  "erfc",
  "fabs",
  "fdim",
  "floor",
  "fmax",
  "fmaximum",
  "fmaximum_num",
  "fmin",
  "fminimum",
  "fminimum_num",
  "fmod",
  "j0",
  "j1",
  "jn",
  "lgamma",
  "log",
  "log1p",
  "log10",
  "log2",
  "nextafter",
  "remainder",
  "rint",
  "round",
  "roundeven",
  "sqrt",
  "tgamma",
  "trunc",
  "y0",
  "y1",
  "yn"
]
exp_default = ["exp2", "exp10", "expm1"]

math = ["num-traits", "libm", "functions"]
trig = ["math"]
ops = ["math"]
op_assign = ["math"]
funcs = ["math"]
exponential = ["math"]
add_assign = ["op_assign"]
sub_assign = ["op_assign"]
mul_assign = ["op_assign"]
div_assign = ["op_assign"]
acos = ["trig"]
acosh = ["trig"]
acot = ["trig"]
acsc = ["trig"]
asec = ["trig"]
asin = ["trig"]
asinh = ["trig"]
atan = ["trig"]
atan2 = ["trig"]
atanh = ["trig"]
cos = ["trig"]
cosh = ["trig"]
cot = ["trig"]
csc = ["trig"]
hypot = ["trig"]
sec = ["trig"]
sin = ["trig"]
sinh = ["trig"]
tan = ["trig"]
tanh = ["trig"]
add = ["ops"]
sub = ["ops"]
mul = ["ops"]
div = ["ops"]
exp = ["ops", "mech-core/math_exp"]
mod = ["ops"]
neg = ["simba","ops"]
cbrt = ["funcs"]
ceil = ["funcs"]
copysign = ["funcs"]
erf = ["funcs"]
erfc = ["funcs"]
fabs = ["funcs"]
fdim = ["funcs"]
floor = ["funcs"]
fmax = ["funcs"]
fmaximum = ["funcs"]
fmaximum_num = ["funcs"]
fmin = ["funcs"]
fminimum = ["funcs"]
fminimum_num = ["funcs"]
fmod = ["funcs"]
j0 = ["funcs"]
j1 = ["funcs"]
jn = ["funcs"]
lgamma = ["funcs"]
log = ["funcs"]
log1p = ["funcs"]
log10 = ["funcs"]
log2 = ["funcs"]
nextafter = ["funcs"]
remainder = ["funcs"]
rint = ["funcs"]
round = ["funcs"]
roundeven = ["funcs"]
sqrt = ["funcs"]
tgamma = ["funcs"]
trunc = ["funcs"]
y0 = ["funcs"]
y1 = ["funcs"]
yn = ["funcs"]
exp2 = ["exponential"]
exp10 = ["exponential"]
expm1 = ["exponential"]


statements_default = ["variable_assign","variable_define","kind_define"]
subscript_default = ["subscript_slice", "subscript_range", "logical_indexing", "swizzle", "subscript_formula", "dot_indexing"]

stdlib = ["bool", "string",
          "u8", "u16", "u32", "u64", "u128", 
          "i8", "i16", "i32", "i64", "i128", 
          "f32", "f64", "c64", "r64", 
          "set", "map", "table", "tuple", "record", "atom",
          "matrix1", "matrix2", "matrix3", "matrix4", "matrix2x3", "matrix3x2",
          "row_vector2", "row_vector3", "row_vector4",
          "vector2", "vector3", "vector4",
          "row_vectord", "vectord", "matrixd",
          "subscript_range", "logical_indexing", "swizzle",
          "subscript_formula", "dot_indexing",
          "variable_define", "variable_assign", "kind_define",
          "kind_annotation", "variables",
          "functions", "formulas",
        ]

compiler = ["mech-core/compiler"]
program = ["mech-core/program"]
pretty_print = ["mech-core/pretty_print"]
serde = ["mech-core/serde"]

statements = ["mech-core/statements"]
variables = ["variable_define", "symbol_table", "mech-core/variables"]
variable_define = ["statements", "functions", "mech-core/variable_define"]
variable_assign = ["statements", "mech-core/variable_assign"]
kind_define = ["kind_annotation", "statements", "mech-core/kind_define"]
kind_annotation = ["functions", "mech-core/kind_annotation"]
formulas = ["mech-core/formulas"]
functions = ["symbol_table", "mech-core/functions"]
symbol_table = ["mech-core/symbol_table"]

bool = ["mech-core/bool"]
string = ["mech-core/string"]

# Numbers
numbers = ["mech-core/numbers"]
complex = ["f64", "numbers", "mech-core/complex"]
rational = ["i64", "numbers", "mech-core/rational"]
signed_ints = ["numbers", "mech-core/signed_ints"]
unsigned_ints = ["numbers", "mech-core/unsigned_ints"]
floats = ["numbers", "mech-core/floats"]
u8 = ["unsigned_ints", "mech-core/u8"]
u16 = ["unsigned_ints", "mech-core/u16"]
u32 = ["unsigned_ints", "mech-core/u32"]
u64 = ["unsigned_ints", "mech-core/u64"]
u128 = ["unsigned_ints", "mech-core/u128"]
i8 = ["signed_ints", "mech-core/i8"]
i16 = ["signed_ints", "mech-core/i16"]
i32 = ["signed_ints", "mech-core/i32"]
i64 = ["signed_ints", "mech-core/i64"]
i128 = ["signed_ints", "mech-core/i128"]
f32 = ["floats", "mech-core/f32"]
f64 = ["floats", "mech-core/f64"]
c64 = ["complex", "mech-core/c64"]
r64 = ["rational", "mech-core/r64"]

# Structs
set = ["mech-core/set"]
map = ["mech-core/map"]
table = ["vectord", "record", "mech-core/table"]
tuple = ["mech-core/tuple"]
enum = ["mech-core/enum"]
record = ["tuple", "mech-core/record"]
atom = ["mech-core/atom"]

# Matrix
matrix = ["nalgebra", "mech-core/matrix"]
fixed_row_vector = ["row_vector4", "row_vector3", "row_vector2", "mech-core/fixed_row_vector"]
fixed_vector = ["vector4", "vector3", "vector2", "mech-core/fixed_vector"]
fixed_matrix = ["matrix4", "matrix3", "matrix2", "matrix1", "matrix2x3", "matrix3x2", "mech-core/fixed_matrix"]
dynamic_matrix = ["matrixd", "vectord", "row_vectord", "mech-core/dynamic_matrix"]
row_vector4 = ["dynamic_matrix","matrix", "mech-core/row_vector4"]
row_vector3 = ["dynamic_matrix","matrix", "mech-core/row_vector3"]
row_vector2 = ["dynamic_matrix","matrix", "mech-core/row_vector2"]
vector4 = ["dynamic_matrix","matrix", "mech-core/vector4"]
vector3 = ["dynamic_matrix","matrix", "mech-core/vector3"]
vector2 = ["dynamic_matrix","matrix", "mech-core/vector2"]
matrix4 = ["dynamic_matrix","matrix", "mech-core/matrix4"]
matrix3 = ["dynamic_matrix","matrix", "mech-core/matrix3"]
matrix2 = ["dynamic_matrix","matrix", "mech-core/matrix2", "mech-core/matrix"]
matrix1 = ["dynamic_matrix","matrix", "mech-core/matrix1"]
matrix2x3 = ["dynamic_matrix","matrix", "mech-core/matrix2x3"]
matrix3x2 = ["dynamic_matrix","matrix", "mech-core/matrix3x2"]
row_vectord =["matrix", "dynamic_matrix", "mech-core/row_vectord"]
vectord = ["matrix", "dynamic_matrix", "mech-core/vectord"]
matrixd = ["matrix", "dynamic_matrix", "mech-core/matrixd"]

# Subscripts
subscript = ["mech-core/subscript"]
subscript_slice = ["subscript", "vectord", "mech-core/subscript_slice"]
subscript_range = ["subscript_slice","vectord", "mech-core/subscript_range"]
subscript_formula = ["subscript_slice","formulas", "mech-core/subscript_formula"]
logical_indexing = ["subscript","vectord","bool", "mech-core/logical_indexing"]
dot_indexing = ["subscript", "mech-core/dot_indexing"]
swizzle = ["subscript", "mech-core/swizzle"]

[dependencies]
mech-core = { path = "../../mech/src/core", version = "0.2.59", default-features = false }

libm = {version = "0.2.15", optional = true}
simba = {version = "0.9.0", optional = true}
paste = "1.0.15"
nalgebra = {version="0.34.0", optional = true}

[dependencies.num-traits]
version = "0.2.19"
default-features = false
features = ["libm"]
optional = true