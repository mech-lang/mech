<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>


        <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <style>
                  @import url(https://cdn.jsdelivr.net/npm/firacode@6.2.0/distr/fira_code.css);

html {
    scroll-behavior: auto;
}

.mech-program {
    counter-reset: h2;
    margin: auto;
    margin-top: 20px;
    margin-bottom: 20px;
    width: 700px;
}

body {
    font-family: 'Roboto', sans-serif;
    background-color: #2F353B;
    margin: 0;
    padding: 0;
    font-size: 12pt;
}

.mech-root {
    width: 100%;
    display: flex;
    flex-direction: row;
}

#mech-output {
    max-width: 700px;
    min-width: 250px;
    background-color: #171D21;
    color: #f2ead9;
    border-radius: 10px;
}

.mech-toc {
    width: 250px;
    min-width: 250px;
    counter-reset: h2;
    background-color: #171D21;
    color: #f2ead9;
    overflow-y: auto;
    margin-right: 20px;
    padding-right: 0px;
    padding-left: 0px;
    position: sticky; 
    top: 0; 
    height: 100vh;
}

.mech-toc h2 {
    line-height: 23px;
}

.mech-toc::-webkit-scrollbar {
    width: 8px; 
}

.mech-toc::-webkit-scrollbar-track {
    background: transparent; 
}

.mech-toc::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.7); 
    border-radius: 10px; 
}

.mech-toc::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.9); 
}

/* For Firefox */
.mech-toc {
    scrollbar-color: rgba(128, 128, 128, 0.7) transparent;
    scrollbar-width: thin;
}

.mech-toc h1 {
    visibility: hidden;
    font-size: 12pt;
}

.mech-toc h2 {
    font-size: 12pt;
    padding-left: 15px;
}

h2.toc::before {
    padding-right: 5px;
}

.mech-toc h2 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-toc h2:hover::before {
    color: #f18181;
}

.mech-toc h2 a:hover {
    color: #f18181;
    text-decoration: none;
}

h3.toc::before {
    font-size: 12pt;
    padding-right: 5px;
    color: rgba(255, 255, 255, 0.55);
}
.mech-toc h3 {
    line-height: 23px;
}

.mech-toc h3 {
    font-size: 12pt;
    padding-left: 30px;
}

.mech-toc h3 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-toc h3:hover::before {
    color: #f18181;
}

.mech-toc h3 a:hover {
    color: #f18181;
    text-decoration: none;
}

h4.toc::before {
    font-size: 12pt;
    padding-right: 5px;
    color: rgba(255, 255, 255, 0.55);
}
.mech-toc h4 {
    line-height: 23px;
    font-size: 12pt;
    padding-left: 60px;
    margin: 10px;
}

.mech-toc h4 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-toc h4:hover::before {
    color: #f18181;
}

.mech-toc h4 a:hover {
    color: #f18181;
    text-decoration: none;
}

.mech-matrix {
    display: inline-flex;
}

.mech-bracket.end {
    align-self: flex-end;
    margin-left: -10px;
}

.mech-slice-ref {
    display: inline-flex;
}

.mech-matrix-column {
    display: flex;
    flex-direction: column;
    padding-right: 10px;
}

.mech-variable-assign-op {
    padding-left:  6px;
    padding-right: 6px;
    color: #ffd139;
}

.mech-transition-statement {
    color: #ffd139;
}

.mech-transition-output {
    color: #ffd139;
}

.mech-fsm-arm-last {
    color: #ffd139;
}

.mech-term {
    display: inline-flex;
}

.mech-formula-operator {
    padding-left: 6px;
    padding-right: 6px;
}

.mech-program .mech-program-title {
    width: 900px;
    font-family: 'FiraCodeRegular', monospace;
    padding-bottom: 10px;
    border-bottom: 4px dashed #d19710;
    color: #f2ead9;
    letter-spacing: 2px;
    font-size: 22pt;
    font-weight: bold;
    text-align: center;
    margin-bottom: 16px;
    margin-left: -100px;
}

.mech-program h2 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-program h2 {
    width: 850px;
    font-family: 'FiraCodeRegular', monospace;
    padding-bottom: 10px;
    border-bottom: 3px dashed #d19710;
    color: #f2ead9;
    font-size: 16pt;
    font-weight: bold;
    letter-spacing: 2px;
    margin-bottom: 20px;
    margin-top: 50px;
    margin-left: -75px;
}

.mech-program h3 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-program h3 {
    font-family: 'FiraCodeRegular', monospace;
    color: #f2ead9;
    font-size: 14pt;
    font-weight: bold;
    margin-bottom: 10px;
    letter-spacing: 1px;
    margin-left: -48px;
}

.mech-program h4 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-program h4 {
    font-family: 'FiraCodeRegular', monospace;
    color: #f2ead9;
    font-size: 12pt;
    font-weight: bold;
    margin-bottom: 10px;
    letter-spacing: 1px;
}

.mech-program h4 a {
    color: #f2ead9;
    text-decoration: none;
}

.mech-program h4 {
    font-family: 'FiraCodeRegular', monospace;
    color: #f2ead9;
    font-size: 12pt;
    font-weight: bold;
    margin-bottom: 10px;
    letter-spacing: 1px;
}

h4.toc {
    display: none;
}

.mech-variable-mutable {
    color: #ada594;
}

.mech-section-element {
}

.mech-fsm-specification

.mech-fsm-sigil{
    display: inline-flex;
}

.mech-code-block {
    background-color: #171D21;
    color: #ada594;
    font-family: 'FiraCodeLight', monospace;
    font-size: 12pt;
    line-height: 18px;
    border-radius: 0px;
    padding: 30px;
    border-radius: 10px;
    overflow-x: auto;
}

.mech-code-block::-webkit-scrollbar {
    height: 8px; /* Horizontal scrollbar height */
}

.mech-code-block::-webkit-scrollbar-track {
    background: transparent;
}

.mech-code-block::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.7);
    border-radius: 10px;
}

.mech-code-block::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.9);
}

/* Firefox */
.mech-code-block {
    scrollbar-color: rgba(128, 128, 128, 0.7) transparent;
    scrollbar-width: thin;
}

.mech-grammar {
    background-color: #171D21;
    color: #ada594;
    font-family: 'FiraCodeLight', monospace;
    font-size: 12pt;
    line-height: 18px;
    border-radius: 0px;
    padding: 30px;
    border-radius: 10px;
    overflow-x: auto;
}

.mech-grammar::-webkit-scrollbar {
    height: 8px; /* Horizontal scrollbar height */
}

.mech-grammar::-webkit-scrollbar-track {
    background: transparent;
}

.mech-grammar::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.7);
    border-radius: 10px;
}

.mech-grammar::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.9);
}

/* Firefox */
.mech-grammar {
    scrollbar-color: rgba(128, 128, 128, 0.7) transparent;
    scrollbar-width: thin;
}

.mech-grammar-identifier {
    color: #ccbbc2;
}

.mech-grammar-definition {
    color: #ccbbc2;
}

.mech-grammar-definition a {
    color: #ccbbc2;
    text-decoration: none;
}

.mech-grammar-definition a:hover {
    color: #ccbbc2;
    text-decoration: underline;
}

.mech-grammar-choice {
    margin-left: 20px;
}

.mech-grammar-sequence {
    margin-left: 20px;
}


.mech-grammar-terminal {
    color: #ee6262;
}


.mech-code {
}

.mech-statement {
}

.mech-variable-define {
    display: flex;
}

.mech-fsm-specification-header {
    display: inline-flex;
}

.mech-variable-mutable {
    color: #ffd139;
}

.mech-var-name {
    color: #ccbbc2;
}

.mech-expression {
}

.mech-literal {
}

.mech-number {
    color: #C7DCAE;
}

.mech-factor {
    display: inline-flex;
}

.mech-term {
}

code {
    margin: 0px;
    padding: 0px;
}

.mech-inline-code {
    background-color: #171D21;
    color: #ada594;
    font-family: 'FiraCodeLight', monospace;
    font-size: 12pt;
    padding: 3px;
    margin: 0px;
    border-radius: 5px;
}

.mech-inline-mech-code {
    background-color: #171D21;
    color: #C7DCAE;
    font-family: 'FiraCodeLight', monospace;
    font-size: 12pt;
    padding: 3px;
    margin: 0px;
    border-radius: 5px;
}


.mech-formula-operator {
    color: #ffd139;
}

.mech-op-assign-op {
    color: #ffd139;
}

.mech-paragraph {
    color: #f2ead9;
    line-height: 25px;
}

.mech-paragraph a {
    color: #F8D07A;
    text-decoration: underline;
}

.mech-paragraph a:hover {
    color: #f18181;
    text-decoration: underline;
}

.mech-all {
    color: #ffd139;
}

.mech-transpose-op {
    color: #ffd139;
}

.mech-negate-op {
    color: #ffd139;
}

.mech-record {
    display: flex;
}

.mech-binding {
    display: inline-flex;
}

.mech-function-call {
    display: inline-flex;
}

.mech-slice {
    display: inline-flex;
}

.mech-subscript {
    display: inline-flex;
}

.mech-bracket {
    display: inline-flex;
    color: #A157B5
}

.mech-start-brace {
    color: #a157b5
}

.mech-clickable:hover {
    background-color: #2a2b34;
    cursor: pointer;
}

.mech-end-brace {
    color: #a157b5
}

.mech-dot {
    color: #9cc7f3;
}

.mech-binding-colon-op {
    padding-right: 6px;
}

.mech-right-paren {
    color: #a157b5
}

.mech-left-paren {
    color: #a157b5
}

.mech-binding-name {
    color: #9cc7f3;
    padding-left: 6px;
}

.mech-parenthetical {
    color: #a157b5;
}

.mech-function-name {
    color: #d8a5e4;
}

.mech-kind-annotation {
    display: inline-flex;
}

.mech-kind {
    color: #ec8e8e;
    display: inline-flex;
}

.mech-fsm-define-op {
    padding-left: 6px;
}

.mech-fsm-output { 
    padding-left: 6px;
    color: #ffd139;
}

.mech-fsm-input {
    color: #ccbbc2;
    display: inline-flex;
}

.mech-fsm-name {
    color: #d8a5e4;
}

.mech-kind-annotation {
    color: #ee6262;
}

.mech-kind .mech-literal .mech-number {
    color: #ec8e8e;
}

.mech-fsm-state {
    display: inline-flex;
}

.mech-fsm-states {
    display: flex;
    flex-direction: column;
    margin-left: 20px;
}

.mech-state-definition {
    display: inline-flex;
}

.mech-fsm-arms {
    margin-left: 20px;
    display: flex;
    flex-direction: column;
}

.mech-fsm-arm {
    display: inline-flex;
}

.mech-fsm-implementation-header {
    display: inline-flex;
}

.mech-tuple-struct {
    display: inline-flex;
    color: #ffd139;
}

.mech-fsm-sigil {
    color: #ffd139;
}

.mech-fsm-state {
    color: #ffd139;
}

.mech-tuple-struct-patterns {
    display: inline-flex;
}

.mech-fsm-define-op {
    padding-right: 6px;
    color: #ffd139;
}

.mech-matrix.empty .end  {
    margin-left: 0px;
}

.mech-fsm-implementation {
    margin-top: 20px;
}

.mech-fsm-guards {
    display: flex;
    flex-direction: column;
    margin-left: 20px;
}

.mech-fsm-guard-arm {
    color: #ffd139;
    display: inline-flex;
}

.mech-guard-condition {
    padding-left: 6px;
}

.mech-transition-output {
    padding-left: 0px;
}

.mech-state-variables {
    display: inline-flex;
}

.mech-transition-next {
    padding-left: 0px;
    color: #ffd139;
}

.mech-guard-condition {
    display: inline-flex;
    margin: 0px;
}

.mech-pattern-wildcard {
    display: inline-flex;
    color: #ee6262;
}

.mech-tuple-struct {
    margin-right: 6px;
}

.mech-state-name {
    color: #dbc3a5;
}

.mech-tuple-struct-name {
    color: #dbc3a5;
}

.mech-code-block .mech-code:first-child .mech-comment {
    margin-top: 0px;
    padding-top: 0px;
}

.mech-comment {
    color: #ef5f90;;
    font-style: italic;
    padding-top: 20px;
}

.mech-string {
    color: #ee6262;
}


ul {
    color: #F3B62D;
    font-weight: bold;
}

ol {
    color: #F3B62D;
    font-weight: bold;
}


.mech-check-list {
    list-style: none;
    padding-left: 9px;
    margin-top: 0.5em;
}

.mech-check-list-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5em;
    margin: 0;
    color: #dcd4c9;
}

.mech-check-list-item input[type="checkbox"] {
    appearance: none;
    width: 16px;
    height: 16px;
    margin-top: 3px;
    border: 2px solid #777;
    border-radius: 3px;
    background-color: #171D21;
    cursor: pointer;
    position: relative;
}

.mech-check-list-item input[type="checkbox"]:checked {
    background-color: #171D21;
    border-color: #F3B62D;
}

.mech-check-list-item input[type="checkbox"]:checked::after {
    content: "✓";
    color: #F3B62D;
    position: absolute;
    top: 0px;
    left: 1px;
    font-size: 12px;
    line-height: 1;
}

.mech-list-item-emoji {
    list-style-type: none;
    color: #ee6262;
}

.mech-list-item-emoji {
    line-height: 0px;
    color: #ee6262;
}

.mech-list-item-emoji::before {
    content: attr(data-bullet); 
    position: relative;         
    font-size: 12pt;          
    color: #ee6262;;    
    right: 30px;
    top: 13px;
}

.mech-figure {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 20px auto;
}

.mech-image {
    max-width: 110%;
}

.mech-figure-label {
    color: #F3B62D; 
    font-size: 12pt;
    min-width: 60px;
    text-align: right;
}

.mech-figure-caption {
    width: 110%;
}

.mech-float .mech-figure-caption {
    width: 350px;
}

.mech-figure-caption {
    margin-top: 1em;
    color: #eadec2;
    font-size: 12pt;
    text-align: left;;
    line-height: 1.4;
    font-style: italic;
    display: flex;
    flex-direction: row;
    gap: 0.5em;
}

.mech-float .mech-figure {
    margin-top: 10px;
    margin-bottom: 10px;
}

.mech-figure-caption p {
    margin: 0;
}

li {
    padding-left: 5px;
}

li p {
    margin-top: 2px;
    margin-bottom: 2px;
    font-weight: normal;
}

.mech-table-header {
    color: #dbc3a5;
}

.mech-table-rows {
}

.mech-table-row {
}

.mech-table {
    border-collapse: collapse;
    background-color: #2F353B;
    color: #f2ead9; 
    margin: auto;
    margin-bottom: 20px;
}

.mech-table thead {
    background-color: #171D21;
}

.mech-table .mech-table-header-cell {
    color: #f2ead9; 
    padding: 10px;
    text-align: left;
    font-weight: bold;
    border-bottom: 2px solid #333; 
}

.mech-table .mech-table-row-even {
    background-color: #232A30; 
}

.mech-table .mech-table-row-odd {
    background-color: #171D21; 
}

.mech-table .mech-table-cell {
    padding: 10px;
    border-bottom: 1px solid #333; 
    text-align: left;
}

.mech-table tbody tr:hover {
    background-color: #3A4148; 
}

.mech-table a {
    color: #F8D07A;
    text-decoration: underline;
}

.mech-table a:hover {
    color: #f18181;
}

.mech-block-quote {
    width: 80%;
    background-color: #232A30; 
    border-left: 4px solid #F3B62D;; 
    padding: 15px 20px;
    color: #f2ead9; 
    font-style: italic; 
    margin: auto;
    border-radius: 5px;
}

.mech-block-quote blockquote {
    margin: 0;
    padding: 0;
    font-size: 1.2em;
}

.mech-thematic-break {
    border: 0;
    border-top: 2px solid #7e8892;
    margin: 30px 0;
    width: 100%;
    opacity: 0.7;
}

.mech-fenced-mech-block {
    border-radius: 10px;
    margin-bottom: 20px;
}

.mech-fenced-mech-block .mech-code-block {
    background-color: #171D21;
    border-radius: 10px 10px 0px 0px;  
    border-bottom: 2px solid rgb(199, 220, 174);
    margin-bottom: 0px;
}

.mech-block-output {
    margin-top: 0px;
    background-color: #222A30; 
    color: #f2ead9;
    font-family: 'FiraCodeLight', monospace;
    font-size: 12pt;
    padding: 20px;
    border-radius: 0px 0px 10px 10px; /* Only bottom corners rounded */
    overflow-x: auto;
}

.mech-block-output::-webkit-scrollbar {
    height: 8px; /* Horizontal scrollbar height */
}

.mech-block-output::-webkit-scrollbar-track {
    background: transparent;
}

.mech-block-output::-webkit-scrollbar-thumb {
    background: rgba(128, 128, 128, 0.7);
    border-radius: 10px;
}

.mech-block-output::-webkit-scrollbar-thumb:hover {
    background: rgba(128, 128, 128, 0.9);
}

/* Firefox */
.mech-block-output {
    scrollbar-color: rgba(128, 128, 128, 0.7) transparent;
    scrollbar-width: thin;
}

.mech-footnote {
    display: flex;
    align-items: flex-start;
    gap: 0.75em;
    margin-top: 1em;
    font-size: 0.9em;
    color: #ada594;
}

.mech-footnote-id {
    color: #F3B62D;
    font-weight: bold;
    min-width: 2em;
    text-align: right;
    font-family: monospace;
}

.mech-footnote .mech-paragraph {
    margin: 0;
    line-height: 1.6;
    color: #f2ead9;
}

a.mech-footnote-reference {
    text-decoration: none;
    font-size: 0.7em;
    vertical-align: super;
    margin-left: 0.1em;
    color: #F8D07A;
    font-weight: bold;
    min-width: 2em;
    text-align: right;
    cursor: pointer;
    font-family: monospace;
    transition: color 0.2s;
}

.mech-footnote-reference:hover {
    color: #f18181;
    text-decoration: underline;
}

.mech-abstract {
    background-color: #1f252a;
    border: 1px solid #F3B62D;
    padding: 2em 2em;
    margin: 2em 2em;
    border-radius: 8px;
    color: #dcd4c9;
}

.mech-abstract p {
    line-height: 25pt;
    margin: 0px;
    text-align: justify;
}

h2 {
    counter-reset: h3;
}

h3 {
    counter-reset: h4;
}

h2::before {
    color: #F3B62D;
    counter-increment: h2;
    content: counter(h2) ". ";
}

h3::before {
    color: #F3B62D;
    counter-increment: h3;
    content: counter(h2) "." counter(h3) " ";
}

h4::before {
    color: #F3B62D;
    counter-increment: h4;
    content: counter(h2) "." counter(h3) "." counter(h4) " ";
}

.mech-program-subtitle.toc.active::before{
    color: #d65858;
}

.mech-program-subtitle.toc.active a {
    color: #ee6262;
}

.mech-program-section.toc.active{
    background-color: #0d1013;
    padding-top: 10px;
    padding-bottom: 10px;
}

h2:hover a {
    color: #f18181;
}

h3:hover a {
    color: #f18181;
}

h4:hover a {
    color: #f18181;
}

.mech-program-section {
    padding-left: 10px;
    padding-right: 10px;
}

.mech-program-subtitle.toc.visible {
    display: block;
    visibility: visible;
}

.mech-equation {
    text-align: center;
    color: #f2ead9;
}

.mech-inline-equation {
    font-size: 10pt;
    color: #efe4cd;
}

mark {
    background-color: #F3B62D;
    color: #2F353B;
    padding: 0.2em 0.4em;
    border-radius: 4px;
    margin: 0px 7px 0px 3px;
}

.mech-works-cited {
    width: 100%;
}

.mech-citation {
    display: flex;
    align-items: baseline;
    color: #f2ead9;
}

.mech-citation p {
    margin-top: 0px;
    margin-bottom: 10px;
}

.mech-citation-id {
    color: #F3B62D;
    font-family: 'FiraCodeRegular', monospace;
    flex-shrink: 0;
    padding: 5px 10px 5px 10px;
}

.mech-citation-link {
    color: #F8D07A;
    text-decoration: none;
    word-break: break-all;
    transition: color 0.2s ease;
}

.mech-citation-link:hover {
    color: #f18181;
    text-decoration: underline;
}

.mech-reference {
    font-family: 'FiraCodeRegular', monospace;
    align-items: baseline;
    color: #F8D07A;
}

.mech-reference a:hover {
    color: #f18181;
}

.mech-reference a {
    color: #F8D07A;
    text-decoration: none;
}

.mech-float.left {
    float: left;
    margin-right: 20px;
    margin-left: -75px;
}

.mech-float.right {
    float: right;
    margin-left: 20px;
    margin-right: -75px;
}

        </style>
    </head>
    <body>
      <div class="mech-root"><div class="mech-toc"><h1 class="mech-program-title">N-Body Simulation</h1><section class="mech-toc-sections"><section id="14595877968988518" section="22298152192868801" class="mech-program-section toc"></section><section id="62148755752455977" section="9438622517866986" class="mech-program-section toc"><h2 id="60237244106601850" section="1.0" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#13098585812136499">Setup</a></h2><h3 id="25572888612518688" section="1.1" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#51064397846462895">Constants</a></h3><h4 id="36319250290245839" section="1.1" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#44762643912036118">Newton's Version of Kepler's Third Law</a></h4><h4 id="5406845323194217" section="1.1" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#15530044635093944">Applying to the Earth-Sun System</a></h4><h3 id="39202578042070665" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#67942244925994964">Celestial Bodies</a></h3><h4 id="3436357731615073" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#21178761654945901">Sun (☉)</a></h4><h4 id="47449003614953926" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#8364785272181912">Mercury (☿)</a></h4><h4 id="9223517234756566" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#40023181764080722">Venus (♀)</a></h4><h4 id="17250832536995580" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#38542421433907828">Earth (♁)</a></h4><h4 id="15976002352308695" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#65188259752842885">Mars (♂)</a></h4><h4 id="28965716900708364" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#62443435577163760">Jupiter (♃)</a></h4><h4 id="58836235207984103" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#8129407636647509">Saturn (♄)</a></h4><h4 id="44416333152812565" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#14239170345254118">Uranus (♅)</a></h4><h4 id="21507980645178388" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#66298374695935456">Neptune (♆)</a></h4><h4 id="39747735456810062" section="1.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#15189374802178561">Pluto (♇)</a></h4><h3 id="51818985851137573" section="1.3" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#64591810935804276">Indices</a></h3></section><section id="68428689749586615" section="16885191040256091" class="mech-program-section toc"><h2 id="9872023791213900" section="2.0" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#61698104473553555">Momentum and Energy</a></h2><h3 id="67937593286552132" section="2.1" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#40989140539073555">Energy</a></h3><h3 id="1461625487070105" section="2.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#42605124823154439">Momentum</a></h3></section><section id="35511651157512414" section="40687567824749606" class="mech-program-section toc"><h2 id="13076448965978905" section="3.0" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#53926300636712531">Advance Simulation</a></h2><h3 id="53955826909583385" section="3.1" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#45119291760953905">Advance velocities</a></h3><h3 id="6816352927296465" section="3.2" class="mech-program-subtitle toc"><a class="mech-program-subtitle-link toc" href="#1675918594757434">Advance positions</a></h3></section></section></div><div class="mech-program"><h1 class="mech-program-title">N-Body Simulation</h1><div class="mech-program-body"><section id="22298152192868801" section="22298152192868801" class="mech-program-section "><p class="mech-paragraph">The program simulates the gravitational interactions between celestial bodies using numerical methods.</p></section><section id="9438622517866986" section="9438622517866986" class="mech-program-section "><h2 id="13098585812136499" section="1.0" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#13098585812136499">Setup</a></h2><p class="mech-paragraph">This section initializes the constants, defines the solar system's parameters, and organizes the celestial bodies into a matrix.</p><h3 id="51064397846462895" section="1.1" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#51064397846462895">Constants</a></h3><p class="mech-paragraph">We start by defining the constants used in the simulation:</p><table class="mech-table"><thead><tr class="mech-table-header"><th class="mech-table-header-cell" style="text-align:left"><p class="mech-paragraph"> Symbol        </p></th><th class="mech-table-header-cell" style="text-align:left"><p class="mech-paragraph"> Description                                                     </p></th><th class="mech-table-header-cell" style="text-align:left"><p class="mech-paragraph"> Value           </p></th></tr></thead><tbody><tr class="mech-table-row mech-table-row-even"><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> days-per-year </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> Used to normalize planetary data to simulation scale            </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> <code id="37843123183583437" class="mech-inline-mech-code"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></code> </p></td></tr><tr class="mech-table-row mech-table-row-odd"><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> π             </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> Approximation of pi, critical for calculating orbital mechanics </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> <code id="64552921410019856" class="mech-inline-mech-code"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="44020451953797636:0">π</span></span></code>             </p></td></tr><tr class="mech-table-row mech-table-row-even"><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> solar-mass    </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> Normalized mass of the Sun, used as a reference unit            </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> <code id="57605913245464426" class="mech-inline-mech-code"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></code>    </p></td></tr><tr class="mech-table-row mech-table-row-odd"><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> Δt            </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> Defines the simulation's time granularity                       </p></td><td class="mech-table-cell" style="text-align:left"><p class="mech-paragraph"> <code id="57579662864011786" class="mech-inline-mech-code"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="35613668762228277:0">Δt</span></span></code>            </p></td></tr></tbody></table><p class="mech-paragraph">Defined in code:</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-literal"><span class="mech-number">365.24</span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="44020451953797636:0">π</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3.141592654</span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="44020451953797636:0">π</span></span></span><span class="mech-formula-operator">^</span><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="35613668762228277:0">Δt</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.01</span></span></span></span></span></div></div><p class="mech-paragraph">The expression <code class="mech-inline-code">solar-mass := 4 * π ^ 2</code> is a result of using normalized astronomical units in conjunction with Kepler's Third Law. This result is derived from the gravitational constant <span id="42341859360954734" equation="G" class="mech-inline-equation"></span> and the mass of the Sun. In normalized units, we set <span id="40973874261202603" equation="G = 1" class="mech-inline-equation"></span> and define the mass of the Sun in such a way that it simplifies calculations in celestial mechanics.</p><h4 id="44762643912036118" section="1.1" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#44762643912036118">Newton's Version of Kepler's Third Law</a></h4><p class="mech-paragraph">Kepler's Third Law, derived from Newtonian mechanics, is:</p><div id="66416377268803324" equation="T^2 = \frac{4\pi^2 r^3}{G M}" class="mech-equation"></div><p class="mech-paragraph">Solving for the mass <span id="36486927177695693" equation="M" class="mech-inline-equation"></span> of the central body (e.g., the Sun):</p><div id="2037183217342984" equation="M = \frac{4\pi^2 r^3}{G T^2}" class="mech-equation"></div><h4 id="15530044635093944" section="1.1" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#15530044635093944">Applying to the Earth-Sun System</a></h4><p class="mech-paragraph">We can apply this to the Sun-Earth system using astronomical units:</p><ul class="mech-unordered-list"><li class="mech-ul-list-item"><p class="mech-paragraph"><span id="22042241599451645" equation="r = 1" class="mech-inline-equation"></span> AU (astronomical unit)</p></li><li class="mech-ul-list-item"><p class="mech-paragraph"><span id="29770972618943730" equation="T = 1" class="mech-inline-equation"></span> year</p></li><li class="mech-ul-list-item"><p class="mech-paragraph"><span id="54394425793008047" equation="M = M_\odot" class="mech-inline-equation"></span> (solar mass)</p></li></ul><p class="mech-paragraph">Substitute these into the equation:</p><div id="72017145155419659" equation="M_\odot = \frac{4\pi^2 (1)^3}{G (1)^2} = \frac{4\pi^2}{G}" class="mech-equation"></div><p class="mech-paragraph">In astronomical unit systems, it is common to set the gravitational constant <span id="40973874261202603" equation="G = 1" class="mech-inline-equation"></span> for simplicity. Then:</p><div id="59843849071775962" equation="M_\odot = 4\pi^2" class="mech-equation"></div><h3 id="67942244925994964" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#67942244925994964">Celestial Bodies</a></h3><p class="mech-paragraph">Each celestial body is represented as a vector:</p><ul class="mech-unordered-list"><li class="mech-ul-list-item"><p class="mech-paragraph">Rows 1 to 3: Position (<code class="mech-inline-code">x</code>, <code class="mech-inline-code">y</code>, <code class="mech-inline-code">z</code>).</p></li><li class="mech-ul-list-item"><p class="mech-paragraph">Rows 4 to 6: Velocity (<code class="mech-inline-code">vx</code>, <code class="mech-inline-code">vy</code>, <code class="mech-inline-code">vz</code>).</p></li><li class="mech-ul-list-item"><p class="mech-paragraph">Row 7: Mass (<code class="mech-inline-code">m</code>).</p></li></ul><p class="mech-paragraph">Planets are initialized with a position position, velocity (scaled by days-per-year), and mass (solar-mass fraction). The planets matrix stores the positions, velocities, and masses of all celestial bodies. The source of the data is the JPL HORIZONS celestial mechanics database, and normalized for the solar system.</p><h4 id="21178761654945901" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#21178761654945901">Sun (☉)</a></h4><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="4199463606899124:0">☉</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-transpose"><span class="mech-factor"><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span><span class="mech-transpose-op">'</span></span></span></span></span></div></div><h4 id="8364785272181912" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#8364785272181912">Mercury (☿)</a></h4><p class="mech-paragraph">Mercury is the closest planet to the Sun and has a highly elliptical orbit.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="14253015688432398:0">☿</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.38972469318558057</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.15022403533011131</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.023476059815063703</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0042923857521344092</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.021425298453769862</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0023708721826123731</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1.660120e-07.</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="40023181764080722" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#40023181764080722">Venus (♀)</a></h4><p class="mech-paragraph">Venus is the second planet from the Sun and is similar in size and composition to Earth, but has a thick atmosphere and extreme surface conditions.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="57133140341789278:0">♀</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.71803521454713496</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.041947688018485076</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.041304042456734767</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0013897739822126357</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.020119890903497486</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00030021717325320866</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2.447838e-06.</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="38542421433907828" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#38542421433907828">Earth (♁)</a></h4><p class="mech-paragraph">Earth is the third planet from the Sun and the only known planet to support life. It has a diverse climate and geography.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="25895471362625848:0">♁</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.17713546150023925</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.96724162210078579</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000039007362829064718</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.017201146327519165</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0031864352617521142</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00000018827814191274</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3.003489e-06.</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="65188259752842885" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#65188259752842885">Mars (♂)</a></h4><p class="mech-paragraph">Mars is the fourth planet from the Sun and is known for its reddish appearance due to iron oxide on its surface. It has a thin atmosphere and polar ice caps.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="41775799811277044:0">♂</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1.3907159267594730</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.013415706106135855</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.034467796700612273</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00021345415375975118</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.015123072614264662</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00030512951698556953</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3.227151e-07.</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="62443435577163760" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#62443435577163760">Jupiter (♃)</a></h4><p class="mech-paragraph">Jupiter is the largest planet in the solar system and is known for its Great Red Spot, a giant storm. It has a thick atmosphere and many moons.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="15337888514111371:0">♃</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4.84143144246472090</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1.16032004402742839</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.103622044471123109</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00166007664274403694</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00769901118419740425</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000690460016972063023</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.000954791938424326609</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="8129407636647509" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#8129407636647509">Saturn (♄)</a></h4><p class="mech-paragraph">Saturn is known for its prominent ring system and is the second-largest planet in the solar system. It has a gaseous composition and many moons.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="9729512333619155:0">♄</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">8.34336671824457987</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4.12479856412430479</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.403523417114321381</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00276742510726862411</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00499852801234917238</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000230417297573763929</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.000285885980666130812</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="14239170345254118" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#14239170345254118">Uranus (♅)</a></h4><p class="mech-paragraph">Uranus is the third-largest planet in the solar system and is known for its blue-green color due to methane in its atmosphere. It has a unique tilt and a faint ring system.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="34910774973586536:0">♅</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">12.8943695621391310</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">15.1111514016986312</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.223307578892655734</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00296460137564761618</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00237847173959480950</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000296589568540237556</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000436624404335156298</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="66298374695935456" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#66298374695935456">Neptune (♆)</a></h4><p class="mech-paragraph">Neptune is the eighth and farthest planet from the Sun in the solar system. It is known for its deep blue color and strong winds. Neptune has a dynamic atmosphere and a faint ring system.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="55393593350472107:0">♆</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">15.3796971148509165</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">25.9193146099879641</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.179258772950371181</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00268067772490389322</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00162824170038242295</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.000095159225451971587</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.0000515138902046611451</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><h4 id="15189374802178561" section="1.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#15189374802178561">Pluto (♇)</a></h4><p class="mech-paragraph">Pluto is a dwarf planet located in the Kuiper Belt. It was once considered the ninth planet but was reclassified as a dwarf planet in 2006. Pluto has a highly elliptical orbit and is known for its complex geology and atmosphere.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="5204741650545387:0">♇</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">9.87512510193949936</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">27.9392880241831424</span></span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5.06873275440839440</span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00344178030872987300</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00152819214839188910</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.00129137458409475460</span></span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="13954794844069548:0">days-per-year</span></span></span></span></span></span></span> <span class="mech-matrix-element"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">6.547e-09.</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><p class="mech-paragraph">Compiled into one matrix:</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="30651107637397853:0">planets</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-transpose"><span class="mech-factor"><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="4199463606899124:0">☉</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="14253015688432398:0">☿</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="57133140341789278:0">♀</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="25895471362625848:0">♁</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="41775799811277044:0">♂</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15337888514111371:0">♃</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="9729512333619155:0">♄</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="34910774973586536:0">♅</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="55393593350472107:0">♆</span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="5204741650545387:0">♇</span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span><span class="mech-transpose-op">'</span></span></span></span></span></div></div><h3 id="64591810935804276" section="1.3" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#64591810935804276">Indices</a></h3><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="27212168588876550:0">ix1</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="15003672544428797:0">ix2</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5</span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span></span></div></div><p class="mech-paragraph">The index pairs <code class="mech-inline-code">ix1</code> and <code class="mech-inline-code">ix2</code> are used to represent all unique interactions between celestial bodies without repeating any calculations. Each pair of values from <code class="mech-inline-code">ix1</code> and <code class="mech-inline-code">ix2</code> identifies two bodies that interact with each other, ensuring that every combination of bodies is considered exactly once. </p><p class="mech-paragraph">For example, if one pair specifies that body 1 interacts with body 2, there is no separate calculation for body 2 interacting with body 1, as the interaction is symmetric. This method simplifies the simulation by avoiding duplicate computations, making it efficient and easy to manage.</p></section><section id="16885191040256091" section="16885191040256091" class="mech-program-section "><h2 id="61698104473553555" section="2.0" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#61698104473553555">Momentum and Energy</a></h2><p class="mech-paragraph">This section calculates the momentum and energy of the system, ensuring accurate simulation of physical laws.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable">~</span><span class="mech-var-name mech-clickable" id="863861563252387:0">x</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-slice"><span id="30651107637397853:0" class="mech-var-name mech-clickable">planets</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-all">:</span>,<span class="mech-factor"><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">3</span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span>]</span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable">~</span><span class="mech-var-name mech-clickable" id="19870774229802986:0">v</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-slice"><span id="30651107637397853:0" class="mech-var-name mech-clickable">planets</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-all">:</span>,<span class="mech-factor"><span class="mech-expression"><span class="mech-structure"><span class="mech-matrix"><span class="mech-bracket start">[</span><div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">4</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">5</span></span></span></span></div> <div class="mech-matrix-column"><span class="mech-matrix-element"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">6</span></span></span></span></div><span class="mech-bracket end">]</span></span></span></span></span>]</span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="54700430305216652:0">m</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-slice"><span id="30651107637397853:0" class="mech-var-name mech-clickable">planets</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-all">:</span>,<span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">7</span></span></span></span>]</span></span></span></span></span></span></div></div><p class="mech-paragraph">Squared differences in positions for all body pairs.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="66468143024241153:0">Δ</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-parenthetical">(<span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="863861563252387:0" class="mech-var-name mech-clickable">x</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="27212168588876550:0">ix1</span></span></span>,<span class="mech-all">:</span>]</span></span></span></span></span><span class="mech-formula-operator">-</span><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="863861563252387:0" class="mech-var-name mech-clickable">x</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15003672544428797:0">ix2</span></span></span>,<span class="mech-all">:</span>]</span></span></span></span></span></span></span>)</span></span><span class="mech-formula-operator">^</span><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="15242335051849275:0">distance</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-function-call"><span id="19203700972914727:0" class="mech-function-name mech-clickable">stats/sum/column</span><span class="mech-left-paren">(</span><span class="mech-argument-list"><span class="mech-argument"><span class="mech-argument-name"></span><span class="mech-argument-expression"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="66468143024241153:0">Δ</span></span></span></span></span><span class="mech-right-paren">)</span></span></span></span></span></div></div><h3 id="40989140539073555" section="2.1" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#40989140539073555">Energy</a></h3><p class="mech-paragraph">Caculate the system's total energy by summing kinetic and potential energies. Kinetic energy comes from each body's mass and velocity, while potential energy depends on gravitational interactions between body pairs based on their masses and distances. The total energy ensures the simulation conserves energy, reflecting physical accuracy.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="63018825577269491:0">kinetic</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.5</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="54700430305216652:0">m</span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-function-call"><span id="19203700972914727:0" class="mech-function-name mech-clickable">stats/sum/column</span><span class="mech-left-paren">(</span><span class="mech-argument-list"><span class="mech-argument"><span class="mech-argument-name"></span><span class="mech-argument-expression"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="19870774229802986:0">v</span></span></span><span class="mech-formula-operator">^</span><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">2</span></span></span></span></span></span></span></span></span></span><span class="mech-right-paren">)</span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="39403131853707624:0">potential</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="54700430305216652:0" class="mech-var-name mech-clickable">m</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="27212168588876550:0">ix1</span></span></span>]</span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="54700430305216652:0" class="mech-var-name mech-clickable">m</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15003672544428797:0">ix2</span></span></span>]</span></span></span></span></span><span class="mech-formula-operator">/</span><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15242335051849275:0">distance</span></span></span><span class="mech-formula-operator">^</span><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">0.5</span></span></span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="15945307684448478:0">ek</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-function-call"><span id="51349677901554153:0" class="mech-function-name mech-clickable">stats/sum/row</span><span class="mech-left-paren">(</span><span class="mech-argument-list"><span class="mech-argument"><span class="mech-argument-name"></span><span class="mech-argument-expression"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="63018825577269491:0">kinetic</span></span></span></span></span><span class="mech-right-paren">)</span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="57688916526824990:0">em</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-function-call"><span id="51349677901554153:0" class="mech-function-name mech-clickable">stats/sum/row</span><span class="mech-left-paren">(</span><span class="mech-argument-list"><span class="mech-argument"><span class="mech-argument-name"></span><span class="mech-argument-expression"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="39403131853707624:0">potential</span></span></span></span></span><span class="mech-right-paren">)</span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="38642659032373506:0">total-energy</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15945307684448478:0">ek</span></span></span><span class="mech-formula-operator">-</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="57688916526824990:0">em</span></span></span></span></span></span></span></span></div></div><h3 id="42605124823154439" section="2.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#42605124823154439">Momentum</a></h3><p class="mech-paragraph">Calculates the total momentum of the system to ensure the center of mass remains stationary. It computes momentum as the product of each body's mass and velocity, summing across all bodies. An offset is applied to the Sun's velocity to balance the system, maintaining a stable reference frame.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="36186074245776923:0">ps</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-function-call"><span id="19203700972914727:0" class="mech-function-name mech-clickable">stats/sum/column</span><span class="mech-left-paren">(</span><span class="mech-argument-list"><span class="mech-argument"><span class="mech-argument-name"></span><span class="mech-argument-expression"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="19870774229802986:0">v</span></span></span></span></span><span class="mech-right-paren">)</span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="54700430305216652:0">m</span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="19902226261887025:0">offset</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="36186074245776923:0">ps</span></span></span><span class="mech-formula-operator">/</span><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="65968618857730448:0">solar-mass</span></span></span></span></span></span></span></span></span></span></div></div></section><section id="40687567824749606" section="40687567824749606" class="mech-program-section "><h2 id="53926300636712531" section="3.0" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#53926300636712531">Advance Simulation</a></h2><p class="mech-paragraph">Updates the positions and velocities of celestial bodies over time based on gravitational forces.</p><h3 id="45119291760953905" section="3.1" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#45119291760953905">Advance velocities</a></h3><p class="mech-paragraph">Gravitational interactions between body pairs are calculated using their distances and masses. A scaling factor (magnitude) determines how much the velocities change, based on the inverse square of the distance. Velocities are adjusted for each pair, ensuring forces are applied equally and oppositely, maintaining symmetry.</p><div class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-variable-define"><span class="mech-variable-mutable"></span><span class="mech-var-name mech-clickable" id="19278689401649057:0">mag</span><span class="mech-variable-assign-op">:=</span><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="35613668762228277:0">Δt</span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15242335051849275:0">distance</span></span></span><span class="mech-formula-operator">^</span><span class="mech-factor"><span class="mech-negate-op">-</span><span class="mech-negate"><span class="mech-factor"><span class="mech-expression"><span class="mech-literal"><span class="mech-number">1.5</span></span></span></span></span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-op-assign"><span class="mech-target"><span class="mech-slice-ref"><span id="19870774229802986:0" class="mech-var-name mech-clickable">v</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="27212168588876550:0">ix1</span></span></span>,<span class="mech-all">:</span>]</span></span></span></span><span class="mech-op"><span class="mech-op-assign-op">-=</span></span><span class="mech-expression"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="66468143024241153:0">Δ</span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="54700430305216652:0" class="mech-var-name mech-clickable">m</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15003672544428797:0">ix2</span></span></span>]</span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="19278689401649057:0">mag</span></span></span></span></span></span></span></span></span></div><div class="mech-code"><span class="mech-statement"><span class="mech-op-assign"><span class="mech-target"><span class="mech-slice-ref"><span id="19870774229802986:0" class="mech-var-name mech-clickable">v</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="15003672544428797:0">ix2</span></span></span>,<span class="mech-all">:</span>]</span></span></span></span><span class="mech-op"><span class="mech-op-assign-op">+=</span></span><span class="mech-expression"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="66468143024241153:0">Δ</span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-slice"><span id="54700430305216652:0" class="mech-var-name mech-clickable">m</span><span class="mech-subscript"><span class="mech-bracket">[<span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="27212168588876550:0">ix1</span></span></span>]</span></span></span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="19278689401649057:0">mag</span></span></span></span></span></span></span></span></span></div></div><h3 id="1675918594757434" section="3.2" class="mech-program-subtitle "><a class="mech-program-subtitle-link " href="#1675918594757434">Advance positions</a></h3><p class="mech-paragraph">After updating velocities, positions are recalculated by moving each body according to its velocity and the time step. This step advances the simulation, showing how bodies evolve over time under gravitational influence.</p><div class="mech-fenced-mech-block">
        <pre class="mech-code-block"><div class="mech-code"><span class="mech-statement"><span class="mech-op-assign"><span class="mech-target"><span class="mech-slice-ref"><span id="863861563252387:0" class="mech-var-name mech-clickable">x</span><span class="mech-subscript"></span></span></span><span class="mech-op"><span class="mech-op-assign-op">+=</span></span><span class="mech-expression"><span class="mech-expression"><span class="mech-factor"><span class="mech-term"><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="19870774229802986:0">v</span></span></span><span class="mech-formula-operator">*</span><span class="mech-factor"><span class="mech-expression"><span class="mech-var-name mech-clickable" id="35613668762228277:0">Δt</span></span></span></span></span></span></span></span></span></div></pre>
        <pre id="57457408635571604:0" class="mech-block-output"></pre>
      </div></section></div></div>
      <div id = "mech-output"></div>
    </div>
    <script>

let observer = null;
let userScrolling = false;
let scrollTimeout = null;
let scrollLock = false;

function isFullyVisible(el) {
  const rect = el.getBoundingClientRect();
  return (
    rect.top >= 0 &&
    rect.left >= 0 &&
    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
  );
}

document.querySelectorAll('.mech-program-subtitle.toc').forEach(entry => {
  entry.addEventListener('click', () => {
    scrollLock = true;
    if (observer) observer.disconnect();
    const id = entry.id;
    const tag = entry.tagName; // H1, H2, H3, etc.


    const headings = document.querySelectorAll(".mech-program-subtitle:not(.toc)");
    const navItems = document.querySelectorAll(".mech-program-subtitle.toc");
    const sections = document.querySelectorAll(".mech-program-section.toc");
    const all_the_headers = Array.from(document.querySelectorAll('[section]'));

    navItems.forEach(item => item.classList.remove("active"));
    sections.forEach(item => item.classList.remove("active"));

    const section = entry.closest("section");

    if (section) {
      if (!isFullyVisible(section)) {
        section.scrollIntoView();
      }
      const matchingTocSection = Array.from(sections).find(item => item.id === section.id);
      if (matchingTocSection) {
        matchingTocSection.classList.add("active");
      }

      // Now grab the h2, h3, and h4 elements within that section
      const h3s = Array.from(section.querySelectorAll('h3'));

      if (tag === "H4") {
        const closestH3 = h3s.reverse().find(h3 => h3.compareDocumentPosition(entry) & Node.DOCUMENT_POSITION_FOLLOWING);
        const H3Nav = Array.from(navItems).find(item => {
            const link = item.querySelector("a[href]");
            return link && link.getAttribute("href") === `#${closestH3.id}`;
        });
        closestH3.classList.add("active");
      }

      // if tag is h3 then we want to add a "visible" class to all of the headings with the same section
      if (tag === "H3") {
        const h3_id = entry.getAttribute("section");
        all_the_headers.forEach(item => {
          const item_id = item.getAttribute("section");
          if (item_id === h3_id) {
            item.classList.add("visible");
          } else {
            item.classList.remove("visible");
          }
        });
      }

      const topLevelHeading = section.querySelector("h2");
      topLevelHeading.classList.add("active");

    }
    entry.classList.add("active");
    currentActiveTag = tag;
    const link = entry.querySelector('a[href]');
    if (link) {
      window.location.hash = link.getAttribute('href');
    }
  });
});

function createObserver(rootMarginValue,scrolling_down) {
  if (observer) observer.disconnect(); // Clean up old observer
  const headings = document.querySelectorAll(".mech-program-subtitle:not(.toc)");
  const navItems = document.querySelectorAll(".mech-program-subtitle.toc");
  const sections = document.querySelectorAll(".mech-program-section.toc");
  const all_the_headers = Array.from(document.querySelectorAll('[section]'));
  observer = new IntersectionObserver((entries) => {


entries
  .slice() // Create a shallow copy to avoid mutating the original entries array
  .sort((a, b) => {
    // Sort entries based on scroll direction
    return scrolling_down
      ? a.boundingClientRect.top - b.boundingClientRect.top // Ascending for scrolling down
      : b.boundingClientRect.top - a.boundingClientRect.top; // Descending for scrolling up
  })
  .forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        const tag = entry.target.tagName; // H1, H2, H3, etc.

        const activeNav = Array.from(navItems).find(item => {
          const link = item.querySelector("a[href]");
          return link && link.getAttribute("href") === `#${id}`;
        });

        if (!activeNav) return;

        // Deactivate all TOC items
        navItems.forEach(item => item.classList.remove("active"));
        sections.forEach(item => item.classList.remove("active"));

        // Activate the current section's top-level H2
        const section = entry.target.closest("section");
        if (section) {
          const matchingTocSection = Array.from(sections).find(item => {
            const toc_section_id = item.getAttribute("section");
            const section_id = section.getAttribute("section");
            if (toc_section_id && section_id) {
              return toc_section_id === section_id;
            }
          });
          if (matchingTocSection) {
            matchingTocSection.classList.add("active");
            const toc = document.querySelector(".mech-toc");

            if (toc && matchingTocSection) {
              const itemOffsetTop = matchingTocSection.offsetTop;
              const itemHeight = matchingTocSection.offsetHeight;
              const tocHeight = toc.clientHeight;
              const scrollTop = toc.scrollTop;

              // Center the item manually if it's out of view
              const visibleTop = scrollTop;
              const visibleBottom = scrollTop + tocHeight;

              if (itemOffsetTop < visibleTop || itemOffsetTop + itemHeight > visibleBottom) {
                toc.scrollTo({
                  top: itemOffsetTop - tocHeight / 2 + itemHeight / 2,
                  behavior: "smooth"
                });
              }
            }
          }

          // Now grab the h2, h3, and h4 elements within that section
          const h3s = Array.from(section.querySelectorAll('h3'));

          if (tag === "H4") {
            const closestH3 = h3s.reverse().find(h3 => h3.compareDocumentPosition(entry.target) & Node.DOCUMENT_POSITION_FOLLOWING);
            const H3Nav = Array.from(navItems).find(item => {
              const link = item.querySelector("a[href]");
              return link && link.getAttribute("href") === `#${closestH3.id}`;
            });
            if (H3Nav) {
              H3Nav.classList.add("active");
              const h3_id = H3Nav.getAttribute("section");
              all_the_headers.forEach(item => {
                const item_id = item.getAttribute("section");
                if (item_id === h3_id) {
                  item.classList.add("visible");
                } else {
                  item.classList.remove("visible");
                }
              });
            }
          }

          // if tag is h3 then we want to add a "visible" class to all of the headings with the same section
          if (tag === "H3") {
            const h3_id = entry.target.getAttribute("section");
            all_the_headers.forEach(item => {
              const item_id = item.getAttribute("section");
              if (item_id === h3_id) {
                item.classList.add("visible");
              } else {
                item.classList.remove("visible");
              }
            });
          }

          const topLevelHeading = section.querySelector("h2");
          if (topLevelHeading) {
            const topLevelNav = Array.from(navItems).find(item => {
              const link = item.querySelector("a[href]");
              return link && link.getAttribute("href") === `#${topLevelHeading.id}`;
            });
            if (topLevelNav) {
              topLevelNav.classList.add("active");
            }
          }
        }
        activeNav.classList.add("active");
        currentActiveTag = tag;
      }
    });
  }, {
    root: null,
    rootMargin: rootMarginValue,
    threshold: 0
  });
  headings.forEach(heading => observer.observe(heading));
}


window.addEventListener("DOMContentLoaded", () => {
  createObserver("0px 0px 0px 0px");
  const elements = document.querySelectorAll(".mech-equation");
  elements.forEach(el => {
    const eq = el.getAttribute("equation");
    if (eq) {
      katex.render(eq, el, { throwOnError: false });
    }
  });
  const inline_elements = document.querySelectorAll(".mech-inline-equation");
  inline_elements.forEach(el => {
    const eq = el.getAttribute("equation");
    if (eq) {
      katex.render(eq, el, { throwOnError: false });
    }
  });
});

let lastScrollY = window.scrollY;
let scrolling_down = true;
let margin = 10;

function getScrollPercentage() {
  const scrollTop = window.scrollY || window.pageYOffset;
  const docHeight = document.documentElement.scrollHeight - window.innerHeight;

  if (docHeight === 0) return 0; // avoid division by zero on short pages
  return scrollTop / docHeight;
}

window.addEventListener("scroll", () => {
  if (scrollLock) {
    scrollLock = false;
    return;
  }
  
  const percent = getScrollPercentage();
  const currentScrollY = window.scrollY;
  scrolling_down = currentScrollY > lastScrollY;

  if (currentScrollY !== lastScrollY) {
    lastScrollY = currentScrollY;
  }

  if (percent < 0.05) {
    createObserver("0px 0px -90% 0px", scrolling_down);
  } else if (percent < 0.2) {
    createObserver("-0% 0px -90% 0px", scrolling_down);
  } else if (percent < 0.3) {
    createObserver("-10% 0px -80% 0px", scrolling_down);
  } else if (percent < 0.4) {
    createObserver("-20% 0px -70% 0px", scrolling_down);
  } else if (percent < 0.5) {
    createObserver("-30% 0px -60% 0px", scrolling_down);
  } else if (percent < 0.6) {
    createObserver("-40% 0px -50% 0px", scrolling_down);
  } else if (percent < 0.7) {
    createObserver("-50% 0px -40% 0px", scrolling_down);
  } else if (percent < 0.8) {
    createObserver("-60% 0px -30% 0px", scrolling_down);
  } else if (percent < 0.9) {
    createObserver("-70% 0px -20% 0px", scrolling_down);
  } else if (percent <= 0.95) {
    createObserver("-80% 0px 0% 0px", scrolling_down);
  }
});

</script>
    <script type="module">


      import init, {WasmMech} from '/pkg/mech_wasm.js';
      let wasm_core;
      async function run() {
        await init();
        var code = `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`;
        wasm_core = new WasmMech();
        var xhr = new XMLHttpRequest();
        var codeUrl = `/code${window.location.pathname}`;
        xhr.open('GET', codeUrl, true);
        xhr.onload = function (e) {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              var src = xhr.responseText;
              wasm_core.run_program(src);
              wasm_core.init();
            } else {
              console.error("Defaulting to included code");
              wasm_core.run_program(code);
              wasm_core.init();
            }
          }
        };
        xhr.onerror = function (e) {
          console.error("I've been waiting for this error. Look me up in formatter.rs");
          console.error(xhr.statusText);
        };
        xhr.send(null);        
      }
      run();
    </script>
  </body>
</html>